# ShellFusion-backend
This repository is the backend module of ShellFusion. To deploy the backend, please follow the instruction below.
<br>Make sure **docker** is installed if you don't have a Elasticsearch server.
<br>Moreover, on deploying the backend, we found that **16GB of memory** is needed to finish the workflow.
## **install requirement packages**
```bash
pip install -r requirement.txt
```
## **prepare data**
```bash
#work in the root directory of this repository
wget
wget
wget
tar -xvf *.tgz
rm -rf *.tgz
```
## **train w2v models and generate IDF vocabulary**
```bash
#work in the root directory of this repository
python offline/w2v_trainer.py --config config.yml
python offline/tfidf_trainer.py --config config.yml
```

## **deploy elasticsearch and build elasticsearch index**
```bash
#work in the root directory of this repository
#If you already have a ES server running, ignore the docker part and change the ES profile in line 17 of ES.py to your specific ES server.
docker pull docker.elastic.co/elasticsearch/elasticsearch:8.0.0
docker run -it --name es01  --ipc=host -p 9200:9200 -p 9300:9300  -v elasticsearch.yml:/config/elasticsearch.yml docker.elastic.co/elasticsearch/elasticsearch:8.0.0
# copy the password generated by the elasticsearch container on initialization. change the "<yourpassword>" in line 17 of ES.py to that password.

python online/ES.py
```
## **start the backend**
```bash
#work in the root directory of this repository
#using screen to ensure process persistency is recommended
screen -S backend
python online/backend.py --config config.yml
```
